(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54808,e=>{"use strict";e.s(["BikeTypeService",()=>s]),e.i(36180);var t=e.i(98925),a=e.i(59141);let r="bike_type_list",n="merk_bike";class s{static async getBikeTypes(){try{let e=await (0,t.getDocs)((0,t.collection)(a.db,r)),n=[];return e.forEach(e=>{n.push({id:e.id,...e.data()})}),n}catch(e){throw console.error("Error getting bike types:",e),Error("Failed to fetch bike types")}}static async getBikeType(e){try{let n=(0,t.doc)(a.db,r,e),s=await (0,t.getDoc)(n);if(s.exists())return{id:s.id,...s.data()};return null}catch(e){throw console.error("Error getting bike type:",e),Error("Failed to fetch bike type")}}static async getBikeTypesByMerk(e){try{let n=(0,t.query)((0,t.collection)(a.db,r),(0,t.where)("bike_merk","==",e),(0,t.orderBy)("bike_type","asc")),s=await (0,t.getDocs)(n),l=[];return s.forEach(e=>{l.push({id:e.id,...e.data()})}),l}catch(e){throw console.error("Error getting bike types by merk:",e),Error("Failed to fetch bike types by merk")}}static async createBikeType(e){try{return(await (0,t.addDoc)((0,t.collection)(a.db,r),e)).id}catch(e){throw console.error("Error creating bike type:",e),Error("Failed to create bike type")}}static async updateBikeType(e,n){try{let s=(0,t.doc)(a.db,r,e);await (0,t.updateDoc)(s,n)}catch(e){throw console.error("Error updating bike type:",e),Error("Failed to update bike type")}}static async deleteBikeType(e){try{let n=(0,t.doc)(a.db,r,e);await (0,t.deleteDoc)(n)}catch(e){throw console.error("Error deleting bike type:",e),Error("Failed to delete bike type")}}static async getUniqueMerks(){try{let e=await (0,t.getDocs)((0,t.collection)(a.db,n)),r=[];return e.forEach(e=>{let t=e.data(),a=t.name||t.id||e.id;a&&r.push(a)}),r.sort()}catch(e){throw console.error("Error getting unique merks:",e),Error("Failed to fetch unique merks")}}static async getBikeTypeNames(){try{let e=(await this.getBikeTypes()).map(e=>e.bike_type).filter(e=>!!e);return[...new Set(e)].sort()}catch(e){throw console.error("Error getting bike type names:",e),Error("Failed to fetch bike type names")}}static async getAllData(e){if(e===r)return this.getBikeTypes();if(e===n)return this.getUniqueMerks();throw Error("Unknown collection: ".concat(e))}static async getDataById(e,t){if(t===r)return this.getBikeType(e);throw Error("Unknown collection: ".concat(t))}static async createData(e,t){if(t===r)return this.createBikeType(e);throw Error("Unknown collection: ".concat(t))}static async updateData(e,t,a){if(a===r)return this.updateBikeType(e,t);throw Error("Unknown collection: ".concat(a))}static async deleteData(e,t){if(t===r)return this.deleteBikeType(e);throw Error("Unknown collection: ".concat(t))}}},46472,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(43476),a=e.i(64659),r=e.i(87748);let n=e=>{let{value:n,onChange:s,showAllOption:l=!1,placeholder:i="Pilih cabang...",className:o="",onlyActive:c=!0}=e,{branches:d,activeBranches:m,loading:u}=(0,r.useBranches)(),h=[...l?[{id:"all",name:"Semua Cabang"}]:[],...c?m:d];return u?(0,t.jsxs)("div",{className:"relative ".concat(o),children:[(0,t.jsx)("select",{disabled:!0,className:"w-full appearance-none bg-gray-100 border border-gray-300 rounded-md px-3 py-2 pr-8 text-sm text-gray-500",children:(0,t.jsx)("option",{children:"Memuat cabang..."})}),(0,t.jsx)(a.ChevronDown,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}):(0,t.jsxs)("div",{className:"relative ".concat(o),children:[(0,t.jsx)("select",{value:n,onChange:e=>s(e.target.value),className:"w-full appearance-none bg-white border border-gray-300 rounded-md px-3 py-2 pr-8 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:h.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,t.jsx)(a.ChevronDown,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})}},96945,e=>{"use strict";e.s(["default",()=>n]);var t=e.i(43476),a=e.i(71645),r=e.i(55900);let n=function(e){let{threshold:n=300,className:s="",position:l="left"}=e,[i,o]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{let e=()=>{o(window.scrollY>n)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[n]),i)?(0,t.jsxs)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-6 z-50 bg-gradient-to-r from-amber-500 to-yellow-500 hover:from-amber-600 hover:to-yellow-600 text-white p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-110 group ".concat("left"===l?"left-6":"right-6"," ").concat(s),"aria-label":"Scroll to top",children:[(0,t.jsx)(r.ChevronUp,{className:"w-5 h-5"}),(0,t.jsxs)("div",{className:"absolute left-full ml-3 top-1/2 transform -translate-y-1/2 bg-gray-900 text-white text-sm px-3 py-2 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 whitespace-nowrap pointer-events-none",children:["Scroll to top",(0,t.jsx)("div",{className:"absolute right-full top-1/2 transform -translate-y-1/2 border-4 border-transparent border-r-gray-900"})]})]}):null}},87748,e=>{"use strict";e.s(["useBranches",()=>n]);var t=e.i(71645);e.i(36180);var a=e.i(98925),r=e.i(59141);let n=()=>{let[e,n]=(0,t.useState)([]),[s,l]=(0,t.useState)(!0),[i,o]=(0,t.useState)(null),c=async()=>{try{l(!0),o(null);let e=(0,a.collection)(r.db,"branch"),t=(0,a.query)(e,(0,a.orderBy)("name","asc")),s=await (0,a.getDocs)(t),i=[];s.forEach(e=>{var t,a;let r=e.data();i.push({id:e.id,name:r.name||"",address:r.address||"",phone:r.phone||"",urlMaps:r.urlMaps||"",shortenerLink:r.shortenerLink||"",isActive:"active"===r.status,createdAt:null==(t=r.createdAt)?void 0:t.toDate(),updatedAt:null==(a=r.updatedAt)?void 0:a.toDate(),createdBy:r.createdBy,updatedBy:r.updatedBy})}),n(i)}catch(e){console.error("Error fetching branches:",e),o("Failed to fetch branches")}finally{l(!1)}},d=t=>e.find(e=>e.id===t);return(0,t.useEffect)(()=>{c()},[]),{branches:e,activeBranches:e.filter(e=>e.isActive),loading:s,error:i,refetch:c,getBranchById:d,getBranchName:e=>{if(!e)return"Andi Rental";let t=d(e);return(null==t?void 0:t.name)||e}}}},43432,e=>{"use strict";e.s(["Phone",()=>t],43432);let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},87316,e=>{"use strict";e.s(["Calendar",()=>t],87316);let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},63209,e=>{"use strict";e.s(["AlertCircle",()=>t],63209);let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},55900,e=>{"use strict";e.s(["ChevronUp",()=>t],55900);let t=(0,e.i(75254).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},55436,e=>{"use strict";e.s(["Search",()=>t],55436);let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},12482,e=>{"use strict";e.s(["RENTAL_STATUS",()=>a,"RENTAL_STATUS_COLORS",()=>t,"RentalTypes",()=>r,"calculateEndDate",()=>d,"calculateRemainingRentalDays",()=>m,"convertPhoneNumber",()=>x,"convertToDate",()=>i,"convertToTime",()=>o,"formatCurrency",()=>s,"formatRupiah",()=>n,"generatePickupMessage",()=>y,"generateWhatsAppMessage",()=>p,"getFormattedDuration",()=>u,"getFormattedRentalPrice",()=>h,"parseCurrency",()=>l,"removeSeconds",()=>c,"sortByDropoffTime",()=>g]);let t={available:"bg-green-100 text-green-800",returned:"bg-green-100 text-green-800",being_rented_out:"bg-yellow-100 text-yellow-800",maintenance:"bg-red-100 text-red-800",extend:"bg-blue-100 text-blue-800",extendNotPayment:"bg-gray-100 text-gray-800"},a={available:"Tersedia",returned:"Selesai Direntalkan",being_rented_out:"Sedang Direntalkan",maintenance:"Dalam Perawatan",extend:"Perpanjang",extendNotPayment:"Perpanjang Tapi Belum Bayar"},r={driver_days:"Driver (Ojol)",days:"Harian",weeks:"Mingguan",months:"Bulanan"},n=e=>{let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"Rp 0":"Rp ".concat(t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."))},s=e=>e?e.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."):"0",l=e=>e?parseInt(e.replace(/\./g,""),10):0,i=e=>{let t=new Date(e),a=t.getDate(),r=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][t.getMonth()],n=t.getFullYear();return"".concat(a," ").concat(r," ").concat(n)},o=e=>{if(!e)return"-";try{return new Date(e).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}catch(e){return"-"}},c=e=>{let t=e.split(":");return 2===t.length?e:3===t.length?"".concat(t[0],":").concat(t[1]):e};function d(e,t,a){let r=new Date(e);switch(a){case"weeks":r.setDate(r.getDate()+7*t);break;case"months":r.setMonth(r.getMonth()+t);break;default:r.setDate(r.getDate()+t)}return r.toISOString().split("T")[0]}function m(e,t,a){let r=new Date(e);switch(a){case"weeks":r.setDate(r.getDate()+7*t);break;case"months":r.setMonth(r.getMonth()+t);break;default:r.setDate(r.getDate()+t)}let n=new Date;return n.setHours(0,0,0,0),r.setHours(0,0,0,0),Math.ceil((r.getTime()-n.getTime())/864e5)}function u(e,t){let a="string"==typeof e?Number(e):e,r=function(e){switch(e){case"weeks":return"Minggu";case"months":return"Bulan";default:return"Hari"}}(t);return"".concat(a," ").concat(r)}let h=(e,t)=>{let a;switch(e){case"weeks":a=t.weeks;break;case"months":a=t.months;break;case"driver_days":a=Number(t.days)-Number(t.driver_deduction_days);break;case"days":a=t.days;break;default:a=0}return Number(a)},x=e=>e.startsWith("0")?"62"+e.slice(1):e.startsWith("62")?e:null,g=e=>e.sort((e,t)=>{let a=e.dropoff_time?e.dropoff_time:"00:00:00",r=t.dropoff_time?t.dropoff_time:"00:00:00";return a.localeCompare(r)}),p=(e,t)=>{var a,r,n,s,l,i;return"reminder"===t?"Selamat Siang, Bapak/Ibu *".concat(null!=(a=null==e?void 0:e.renter_name)?a:"Nama Customer","*%0A%0ASaya ingin mengingatkan bahwa penyewaan motor *").concat(null!=(r=e.bike_type_name)?r:"Merk Kendaraan","* dengan nomor kendaraan *").concat(null!=(n=null==e?void 0:e.licence_plat_number)?n:"PLAT NOT RECOGNIZED","* Anda akan segera berakhir pada pukul *").concat((null==e?void 0:e.dropoff_time)?c(null==e?void 0:e.dropoff_time):"TBD","*.%0A%0AMohon untuk konfirmasi jika ingin melanjutkan. Jika tidak, kami akan melakukan penjemputan sesuai jam pengantaran.%0A%0ATerima kasih sebelumnya."):"Selamat Siang, Bapak/Ibu *".concat(null!=(s=null==e?void 0:e.renter_name)?s:"Nama Customer","*%0A%0ATerima kasih telah menggunakan layanan penyewaan motor kami. Kami harap Anda puas dengan motor *").concat(null!=(l=e.bike_type_name)?l:"Merk Kendaraan","* dengan nomor kendaraan *").concat(null!=(i=null==e?void 0:e.licence_plat_number)?i:"DD DICOBA BB","* yang telah Anda sewa.%0A%0AJika Anda membutuhkan layanan penyewaan motor lagi di masa mendatang, jangan ragu untuk menghubungi kami. Kami siap melayani dengan armada motor yang terawat dan harga yang kompetitif.%0A%0A*Terima kasih atas kepercayaannya, semoga hari Anda menyenangkan.*")},y=(e,t)=>{let a="List Penjemputan Hari ini tanggal ".concat(e,"%0A%0A%0A");return t.forEach(e=>{a+="".concat(e.renter_name,", "),a+="".concat(e.bike_type_name,", "),a+="".concat(Number(e.rent_duration)," Hari, "),a+="Jumlah Helm: *".concat(Number(e.total_helm)||"-","*, "),a+="Jam Pengantaran: *".concat(c(e.dropoff_time||""),"*, "),a+="Lokasi: *".concat(e.renter_address,"*, "),a+="Nomor Telefon: ".concat(e.phone_number,", "),a+="Tim Penjemput: ,%0A%0A",a+="------------------------------ %0A%0A"}),a}},46897,e=>{"use strict";e.s(["MapPin",()=>t],46897);let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},51199,e=>{"use strict";e.s(["CustomTable",()=>i]);var t=e.i(43476),a=e.i(71645),r=e.i(55900),n=e.i(64659),s=e.i(73375),l=e.i(63059);function i(e){let{data:i,config:o,isLoading:c=!1,className:d=""}=e,{columns:m,actions:u=[],showRowNumbers:h=!1,responsive:x=!0,loading:g=!1,emptyState:p,mobileActionsPosition:y="bottom",pagination:b={enabled:!1,pageSize:10,pageSizeOptions:[5,10,25,50],showPageSizeSelector:!0}}=o,[f,k]=(0,a.useState)({key:null,direction:"asc"}),[v,w]=(0,a.useState)(1),[j,N]=(0,a.useState)(b.pageSize||10),[_,S]=(0,a.useState)(1),[A]=(0,a.useState)(10),[T,D]=(0,a.useState)(!1),B=(0,a.useMemo)(()=>f.key?[...i].sort((e,t)=>{let a=m.find(e=>e.key===f.key),r=(null==a?void 0:a.sortKey)||f.key,n=e[r],s=t[r];return("string"==typeof n&&"string"==typeof s&&(n=n.toLowerCase(),s=s.toLowerCase()),n<s)?"asc"===f.direction?-1:1:n>s?"asc"===f.direction?1:-1:0}):i,[i,f,m]),E=(0,a.useMemo)(()=>{if(!b.enabled)return B;let e=(v-1)*j,t=e+j;return B.slice(e,t)},[B,v,j,b.enabled]),C=B.length,M=Math.ceil(C/j),R=(v-1)*j+1,P=Math.min(v*j,C),I=e=>{w(e)},H=(0,a.useMemo)(()=>B.slice(0,_*A),[B,_,A]),L=H.length<B.length,O=(0,a.useCallback)(()=>{!T&&L&&(D(!0),setTimeout(()=>{S(e=>e+1),D(!1)},1500))},[T,L]);if((0,a.useEffect)(()=>{let e=()=>{if(!L||T)return;let e=window.pageYOffset||document.documentElement.scrollTop,t=window.innerHeight;e+t>=document.documentElement.scrollHeight-200&&O()};return window.addEventListener("scroll",e,{passive:!0}),()=>{window.removeEventListener("scroll",e)}},[L,T,O]),g||c)return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm ".concat(d),children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-4"}),(0,t.jsx)("div",{className:"space-y-3",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded"},a))})]})})});if(!i||0===i.length){let e=null==p?void 0:p.icon;return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm ".concat(d),children:(0,t.jsxs)("div",{className:"p-12 text-center",children:[e&&(0,t.jsx)(e,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:(null==p?void 0:p.title)||"Tidak ada data"}),(0,t.jsx)("p",{className:"text-gray-500",children:(null==p?void 0:p.description)||"Belum ada data yang tersedia."})]})})}let F=()=>(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[h&&(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No"}),m.map((e,a)=>(0,t.jsx)("th",{className:"px-6 py-3 text-".concat(e.align||"left"," text-xs font-medium text-gray-500 uppercase tracking-wider ").concat(e.width?"w-".concat(e.width):""," ").concat(!1!==e.sortable?"cursor-pointer hover:bg-gray-100 select-none":""),onClick:()=>{var t;return!1!==e.sortable&&(t=e.key,void k(e=>({key:t,direction:e.key===t&&"asc"===e.direction?"desc":"asc"})))},children:(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,t.jsx)("span",{children:e.label}),!1!==e.sortable&&(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)(r.ChevronUp,{className:"h-3 w-3 ".concat(f.key===e.key&&"asc"===f.direction?"text-gray-900":"text-gray-400")}),(0,t.jsx)(n.ChevronDown,{className:"h-3 w-3 -mt-1 ".concat(f.key===e.key&&"desc"===f.direction?"text-gray-900":"text-gray-400")})]})]})},a)),u.length>0&&(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aksi"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:E.map((e,a)=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[h&&(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:b.enabled?R+a:a+1}),m.map((r,n)=>{let s="index"===r.key?a+1:e[r.key];return(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-".concat(r.align||"left"),children:r.render?r.render(s,e,a):String(s||"-")},n)}),u.length>0&&(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,t.jsx)("div",{className:"flex items-center justify-end space-x-2",children:u.map((a,r)=>{if(a.condition&&!a.condition(e))return null;let n=a.icon;return(0,t.jsxs)("button",{onClick:()=>a.onClick(e),title:a.title||a.label,className:"inline-flex items-center px-3 py-1 border border-transparent text-sm font-medium rounded-md transition-colors duration-200 ".concat({primary:"text-blue-600 hover:text-blue-900",secondary:"text-gray-600 hover:text-gray-900",success:"text-green-600 hover:text-green-900",danger:"text-red-600 hover:text-red-900",warning:"text-yellow-600 hover:text-yellow-900",info:"text-blue-600 hover:text-blue-900"}[a.variant]," ").concat(a.className||""),children:[(0,t.jsx)(n,{className:"h-4 w-4 mr-1"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:a.label})]},r)})})})]},a))})]})}),K=()=>{var e;return!b.enabled||M<=1?null:(0,t.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[(0,t.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,t.jsx)("button",{onClick:()=>I(v-1),disabled:1===v,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,t.jsx)("button",{onClick:()=>I(v+1),disabled:v===M,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,t.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,t.jsx)("div",{children:(0,t.jsxs)("p",{className:"text-sm text-gray-700",children:["Showing ",(0,t.jsx)("span",{className:"font-medium",children:R})," to"," ",(0,t.jsx)("span",{className:"font-medium",children:P})," of"," ",(0,t.jsx)("span",{className:"font-medium",children:C})," results"]})}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[b.showPageSizeSelector&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-700",children:"Show:"}),(0,t.jsx)("select",{value:j,onChange:e=>{N(Number(e.target.value)),w(1)},className:"border border-gray-300 rounded-md px-2 py-1 text-sm",children:null==(e=b.pageSizeOptions)?void 0:e.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),(0,t.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[(0,t.jsx)("button",{onClick:()=>I(v-1),disabled:1===v,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)(s.ChevronLeft,{className:"h-5 w-5"})}),(()=>{let e=[];if(M<=5)for(let t=1;t<=M;t++)e.push(t);else{let t=Math.max(1,v-2),a=Math.min(M,t+5-1);t>1&&(e.push(1),t>2&&e.push("..."));for(let r=t;r<=a;r++)e.push(r);a<M&&(a<M-1&&e.push("..."),e.push(M))}return e})().map((e,a)=>(0,t.jsx)("button",{onClick:()=>"number"==typeof e&&I(e),disabled:"number"!=typeof e,className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(e===v?"z-10 bg-blue-50 border-blue-500 text-blue-600":"..."===e?"bg-white border-gray-300 text-gray-700 cursor-default":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:e},a)),(0,t.jsx)("button",{onClick:()=>I(v+1),disabled:v===M,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,t.jsx)(l.ChevronRight,{className:"h-5 w-5"})})]})]})]})]})};return(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm ".concat(d),children:x?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"hidden md:block",children:[(0,t.jsx)(F,{}),b.enabled&&(0,t.jsx)(K,{})]}),(0,t.jsx)("div",{className:"md:hidden",children:(0,t.jsx)(()=>(0,t.jsxs)("div",{className:"space-y-4",children:[H.map((e,a)=>{let r=u.length>0&&u.some(t=>!t.condition||t.condition(e)),n=m.find(e=>"actions"===e.key),s=n&&n.mobileRender;return(0,t.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 shadow-sm relative",children:["top-right"===y&&(r||s)&&(0,t.jsx)("div",{className:"absolute top-3 right-3 z-10",children:s?(null==n?void 0:n.mobileRender)&&n.mobileRender(e[n.key],e,a):(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:u.map((a,r)=>{if(a.condition&&!a.condition(e))return null;let n=a.icon;return(0,t.jsx)("button",{onClick:()=>a.onClick(e),title:a.title||a.label,className:"inline-flex items-center p-2 border text-sm font-medium rounded-md transition-colors duration-200 ".concat({primary:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100",secondary:"bg-gray-50 text-gray-700 border-gray-200 hover:bg-gray-100",success:"bg-green-50 text-green-700 border-green-200 hover:bg-green-100",danger:"bg-red-50 text-red-700 border-red-200 hover:bg-red-100",warning:"bg-yellow-50 text-yellow-700 border-yellow-200 hover:bg-yellow-100",info:"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100"}[a.variant]," ").concat(a.className||""),children:(0,t.jsx)(n,{className:"h-4 w-4"})},r)})})}),(0,t.jsxs)("div",{className:"space-y-3 ".concat("top-right"===y&&(r||s)?"pr-16":""),children:[m.map((r,n)=>{if(r.hideOnMobile||"actions"===r.key)return null;let s="index"===r.key?a+1:e[r.key];return(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("div",{className:"text-xs font-medium text-gray-500 mb-1",children:r.label}),(0,t.jsx)("div",{className:"text-sm text-gray-900",children:r.mobileRender?r.mobileRender(s,e,a):r.render?r.render(s,e,a):String(s||"-")})]},n)}),"bottom"===y&&(r||s)&&(0,t.jsx)("div",{className:"pt-3 border-t border-gray-200",children:s?(null==n?void 0:n.mobileRender)&&n.mobileRender(e[n.key],e,a):(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:u.map((a,r)=>{if(a.condition&&!a.condition(e))return null;let n=a.icon;return(0,t.jsxs)("button",{onClick:()=>a.onClick(e),title:a.title||a.label,className:"inline-flex items-center px-3 py-2 border text-sm font-medium rounded-md transition-colors duration-200 ".concat({primary:"bg-blue-50 text-blue-700 border-blue-200",secondary:"bg-gray-50 text-gray-700 border-gray-200",success:"bg-green-50 text-green-700 border-green-200",danger:"bg-red-50 text-red-700 border-red-200",warning:"bg-yellow-50 text-yellow-700 border-yellow-200",info:"bg-blue-50 text-blue-700 border-blue-200"}[a.variant]," ").concat(a.className||""),children:[(0,t.jsx)(n,{className:"h-4 w-4 mr-2"}),a.label]},r)})})})]})]},a)}),L&&(0,t.jsx)("div",{className:"flex justify-center py-6",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-12 h-12 border-4 border-amber-200 rounded-full animate-spin border-t-amber-500"}),(0,t.jsx)("div",{className:"absolute inset-0 w-12 h-12 border-4 border-transparent rounded-full animate-ping border-t-amber-400 opacity-75"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm font-medium bg-gradient-to-r from-amber-500 to-yellow-500 bg-clip-text text-transparent",children:"Loading more content..."}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[B.length-H.length," items remaining"]})]}),(0,t.jsx)("div",{className:"w-32 h-1 bg-gray-200 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-purple-500 rounded-full animate-pulse"})})]})}),!L&&H.length>0&&(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsxs)("div",{className:"flex flex-col items-center space-y-3",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,t.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsx)("div",{className:"absolute inset-0 w-12 h-12 bg-green-200 rounded-full animate-ping opacity-20"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"🎉 Selamat! Anda telah memuat semua data"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Semua ",H.length," item telah ditampilkan"]})]}),(0,t.jsx)("div",{className:"w-24 h-0.5 bg-gradient-to-r from-green-400 to-blue-400 rounded-full"})]})})]}),{})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F,{}),b.enabled&&(0,t.jsx)(K,{})]})})}},2849,e=>{"use strict";e.s(["SelectDropdown",()=>r]);var t=e.i(43476),a=e.i(64659);function r(e){let{value:r,onChange:n,options:s,placeholder:l="Pilih...",icon:i,className:o=""}=e;return(0,t.jsxs)("div",{className:"relative ".concat(o),children:[i&&(0,t.jsx)("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",children:i}),(0,t.jsxs)("select",{value:r,onChange:e=>n(e.target.value),className:"w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm appearance-none bg-white hover:border-gray-400 ".concat(i?"pl-10 pr-10 py-2.5":"px-3 py-2.5 pr-10"),children:[(0,t.jsx)("option",{value:"",disabled:!0,children:l}),s.map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))]}),(0,t.jsx)(a.ChevronDown,{className:"h-4 w-4 absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]})}},87130,18342,e=>{"use strict";e.s(["Filter",()=>t],87130);let t=(0,e.i(75254).default)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);e.s(["SearchField",()=>n],18342);var a=e.i(43476),r=e.i(55436);function n(e){let{value:t,onChange:n,placeholder:s="Cari...",className:l=""}=e;return(0,a.jsxs)("div",{className:"relative ".concat(l),children:[(0,a.jsx)(r.Search,{className:"h-5 w-5 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"}),(0,a.jsx)("input",{type:"text",placeholder:s,value:t,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all duration-200 text-sm placeholder-gray-500 hover:border-gray-400"})]})}},94983,e=>{"use strict";e.s(["MessageCircle",()=>t],94983);let t=(0,e.i(75254).default)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]])},14,e=>{"use strict";e.s(["BIKE_OPTIONS",()=>t,"RENTAL_STATUS",()=>a,"RentalTypes",()=>r]);let t={honda_scoopy:"Honda Scoopy",honda_beat:"Honda Beat",yamaha_nmax:"Yamaha Nmax",yamaha_fazzio:"Yamaha Fazzio",yamaha_gear:"Yamaha Gear",smooth_zuzu:"Smooth Zuzu",smooth_tempur:"Smooth Tempur"},a={available:"Tersedia",returned:"Selesai Direntalkan",being_rented_out:"Sedang Direntalkan",maintenance:"Dalam Perawatan",extend:"Perpanjang",extendNotPayment:"Perpanjang Tapi Belum Bayar"},r={driver_days:"Driver (Ojol)",days:"Harian",weeks:"Mingguan",months:"Bulanan"}},70273,e=>{"use strict";e.s(["Star",()=>t],70273);let t=(0,e.i(75254).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},51885,e=>{"use strict";e.s(["HistoryService",()=>n]),e.i(36180);var t=e.i(98925),a=e.i(59141);let r="history_bike_list";class n{static async getHistoryRecords(){try{let e=await (0,t.getDocs)((0,t.collection)(a.db,r)),n=[];return e.forEach(e=>{let t=e.data();n.push({id:e.id,branchId:t.branch||null,...t})}),n}catch(e){throw console.error("Error getting history records:",e),Error("Failed to fetch history records")}}static async getHistoryRecordsByBranch(e){try{let n=await (0,t.getDocs)((0,t.collection)(a.db,r)),s=[];return n.forEach(t=>{let a=t.data(),r={id:t.id,branchId:a.branch||null,...a};(r.branchId===e||null===r.branchId&&"andi-rental"===e)&&s.push(r)}),s}catch(e){throw console.error("Error getting history records by branch:",e),Error("Failed to fetch history records by branch")}}static async getHistoryRecordsByStatus(e){try{let n=(0,t.query)((0,t.collection)(a.db,r),(0,t.where)("status","==",e)),s=await (0,t.getDocs)(n),l=[];return s.forEach(e=>{let t=e.data();l.push({id:e.id,branchId:t.branch||null,...t})}),l}catch(e){throw console.error("Error getting history records by status:",e),Error("Failed to fetch history records by status")}}static async getHistoryRecord(e){try{let n=(0,t.doc)(a.db,r,e),s=await (0,t.getDoc)(n);if(s.exists()){let e=s.data();return{id:s.id,branchId:e.branch||null,...e}}return null}catch(e){throw console.error("Error getting history record:",e),Error("Failed to fetch history record")}}static async createHistoryRecord(e){try{return(await (0,t.addDoc)((0,t.collection)(a.db,r),e)).id}catch(e){throw console.error("Error creating history record:",e),Error("Failed to create history record")}}static async updateHistoryRecord(e,n){try{let s=(0,t.doc)(a.db,r,e);await (0,t.updateDoc)(s,n)}catch(e){throw console.error("Error updating history record:",e),Error("Failed to update history record")}}static async deleteHistoryRecord(e){try{let n=(0,t.doc)(a.db,r,e);await (0,t.deleteDoc)(n)}catch(e){throw console.error("Error deleting history record:",e),Error("Failed to delete history record")}}static async getHistoryStats(){try{let e=await this.getHistoryRecords();return{total:e.length,returned:e.filter(e=>"returned"===e.status).length,extend:e.filter(e=>"extend"===e.status).length,extendNotPayment:e.filter(e=>"extendNotPayment"===e.status).length}}catch(e){throw console.error("Error getting history statistics:",e),Error("Failed to fetch history statistics")}}static async getHistoryRecordsByDateRange(e,n){try{let s=(0,t.query)((0,t.collection)(a.db,r),(0,t.where)("start_date_rent",">=",e),(0,t.where)("start_date_rent","<=",n),(0,t.orderBy)("start_date_rent","desc")),l=await (0,t.getDocs)(s),i=[];return l.forEach(e=>{let t=e.data();i.push({id:e.id,branchId:t.branch||null,...t})}),i}catch(e){throw console.error("Error getting history records by date range:",e),Error("Failed to fetch history records by date range")}}static async getAllData(e){if(e===r)return this.getHistoryRecords();throw Error("Unknown collection: ".concat(e))}static async getDataById(e,t){if(t===r)return this.getHistoryRecord(e);throw Error("Unknown collection: ".concat(t))}static async createData(e,t){if(t===r)return this.createHistoryRecord(e);throw Error("Unknown collection: ".concat(t))}static async updateData(e,t,a){if(a===r)return this.updateHistoryRecord(e,t);throw Error("Unknown collection: ".concat(a))}}},18626,e=>{"use strict";e.s(["default",()=>_],18626);var t=e.i(43476),a=e.i(71645),r=e.i(3116),n=e.i(87130),s=e.i(87316),l=e.i(84614),i=e.i(40921),o=e.i(63209),c=e.i(51885),d=e.i(54808),m=e.i(12482),u=e.i(14),h=e.i(94983),x=e.i(43432),g=e.i(46897),p=e.i(70273),y=e.i(51199);function b(e){let{data:a,onOfferCustomer:n,onRequestReview:o,isLoading:c=!1,bikeTypeMap:d={}}=e,b=e=>{switch(e){case"returned":return"bg-green-100 text-green-800";case"extend":return"bg-blue-100 text-blue-800";case"extendNotPayment":return"bg-yellow-100 text-yellow-800";case"maintenance":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},f=e=>u.RENTAL_STATUS[e]||"Unknown",k=e=>e?(0,m.convertToDate)(e):"-",v={columns:[{key:"licence_plat_number",label:"Nomor Kendaraan",render:(e,a)=>(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"h-8 w-8 bg-blue-100 rounded-full flex items-center justify-center mr-3",children:(0,t.jsx)(i.Bike,{className:"h-4 w-4 text-blue-600"})}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:a.licence_plat_number||"-"})]}),mobileRender:(e,a)=>{let r=d[a.bike_type||""]||u.BIKE_OPTIONS[a.bike_type]||a.bike_type||"-";return(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a.licence_plat_number||"-"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:r}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:a.bike_year||"-"})]})]})}},{key:"bike_type",label:"Tipe Motor",render:(e,a)=>{let r=d[a.bike_type||""]||u.BIKE_OPTIONS[a.bike_type]||a.bike_type||"-";return(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:r})}},{key:"bike_year",label:"Tahun",render:e=>String(e||"-")},{key:"rental_rate",label:"Tarif",render:e=>(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:e?(0,m.formatRupiah)(String(e)):"0"})},{key:"renter_name",label:"Nama Penyewa",render:e=>String(e||"-"),mobileRender:(e,a)=>(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(l.User,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:a.renter_name||"-"})]}),(0,t.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.Phone,{className:"h-3 w-3 text-gray-400"}),(0,t.jsx)("span",{children:a.phone_number||"-"})]}),a.phone_number_emergency&&(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(x.Phone,{className:"h-3 w-3 text-red-400"}),(0,t.jsxs)("span",{children:["Darurat: ",a.phone_number_emergency]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,t.jsx)(g.MapPin,{className:"h-3 w-3 text-gray-400 mt-0.5"}),(0,t.jsx)("span",{className:"truncate",children:a.renter_address||"-"})]})]})]})},{key:"renter_address",label:"Alamat",render:e=>(0,t.jsx)("span",{className:"text-sm text-gray-500 max-w-xs truncate",children:String(e||"-")}),hideOnMobile:!0},{key:"phone_number",label:"Nomor HP/WA",render:e=>String(e||"-"),hideOnMobile:!0},{key:"phone_number_emergency",label:"Nomor Darurat",render:e=>String(e||"-"),hideOnMobile:!0},{key:"rent_type",label:"Tipe Penyewa",render:e=>u.RentalTypes[e]||String(e||"-"),mobileRender:(e,a)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-900",children:u.RentalTypes[a.rent_type]||a.rent_type||"-"}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:a.rent_duration?"".concat(a.rent_duration," hari"):"-"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-lg font-bold text-green-600",children:a.total_payment?(0,m.formatRupiah)(a.total_payment):"0"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500",children:["Jaminan: ",a.security_deposit||"-"]})]})]})},{key:"start_date_rent",label:"Tanggal Mulai",render:e=>e?k(String(e)):"-",mobileRender:(e,a)=>(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(s.Calendar,{className:"h-4 w-4 text-green-500"}),(0,t.jsx)("span",{className:"font-medium text-gray-900",children:a.start_date_rent?k(a.start_date_rent):"-"})]}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Mulai"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(s.Calendar,{className:"h-4 w-4 text-red-500"}),(0,t.jsx)("span",{className:"text-gray-900",children:a.start_date_rent?k((0,m.calculateEndDate)(a.start_date_rent,Number(a.rent_duration))):"-"})]}),(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"Selesai"})]}),a.dropoff_time&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,t.jsx)(r.Clock,{className:"h-3 w-3 text-blue-500"}),(0,t.jsx)("span",{children:a.dropoff_time})]})]})},{key:"dropoff_time",label:"Jam Pengantaran",render:e=>String(e||"-"),hideOnMobile:!0},{key:"rent_duration",label:"Lama Sewa",render:e=>e?"".concat(String(e)," hari"):"-",hideOnMobile:!0},{key:"end_date",label:"Tanggal Selesai",render:(e,a)=>(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:a.start_date_rent?k((0,m.calculateEndDate)(a.start_date_rent,Number(a.rent_duration))):"-"}),hideOnMobile:!0},{key:"security_deposit",label:"Jaminan",render:e=>String(e||"-"),hideOnMobile:!0},{key:"status",label:"Status",render:e=>(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(b(String(e||""))),children:f(String(e||""))}),mobileRender:e=>(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat(b(String(e||""))),children:f(String(e||""))})}],actions:[{key:"offer",label:"Tawarkan lagi",icon:h.MessageCircle,variant:"success",onClick:n,title:"Tawarkan lagi"},...o?[{key:"review",label:"Minta Review",icon:p.Star,variant:"primary",onClick:o,title:"Minta Review Google Maps"}]:[]],showRowNumbers:!0,responsive:!0,loading:c,emptyState:{icon:r.Clock,title:"Tidak ada data ditemukan",description:"Coba sesuaikan kriteria pencarian atau filter Anda."}};return(0,t.jsx)(y.CustomTable,{data:a,config:v,isLoading:c})}var f=e.i(18342),k=e.i(2849),v=e.i(96945),w=e.i(46472),j=e.i(52962),N=e.i(87748);function _(){let{isSuperAdmin:e,getCurrentBranchId:h,userRole:x}=(0,j.useAuth)(),{getBranchName:g,getBranchById:p}=(0,N.useBranches)(),[y,_]=(0,a.useState)(""),[S,A]=(0,a.useState)("all"),[T,D]=(0,a.useState)("all"),[B,E]=(0,a.useState)("all"),[C,M]=(0,a.useState)(!1),[R,P]=(0,a.useState)([]),[I,H]=(0,a.useState)({}),[L,O]=(0,a.useState)(null);(0,a.useEffect)(()=>{x&&(K(),F())},[B,x]);let F=async()=>{try{let e=await d.BikeTypeService.getBikeTypes(),t={};e.forEach(e=>{e.id&&e.bike_type&&(t[e.id]=e.bike_type)}),H(t)}catch(e){console.error("Error loading bike types:",e)}},K=async()=>{try{M(!0),O(null);let t=[];if(e())t="all"!==B?await c.HistoryService.getHistoryRecordsByBranch(B):await c.HistoryService.getHistoryRecords();else{let e=h();t=e?await c.HistoryService.getHistoryRecordsByBranch(e):[]}console.log("History data loaded:",t.length,"records"),console.log("Sample records:",t.slice(0,3).map(e=>({id:e.id,branchId:e.branchId,renter_name:e.renter_name}))),P(t),M(!1)}catch(e){console.error("Error fetching data:",e),O("Failed to fetch data. Please try again."),M(!1)}},U=R.filter(e=>{var t,a,r,n;let s=(null==(t=e.renter_name)?void 0:t.toLowerCase().includes(y.toLowerCase()))||(null==(a=e.bike_type_name)?void 0:a.toLowerCase().includes(y.toLowerCase()))||(null==(r=e.licence_plat_number)?void 0:r.toLowerCase().includes(y.toLowerCase()))||(null==(n=e.phone_number)?void 0:n.includes(y)),l="all"===S||e.status===S;return s&&l&&!0}),z=R.filter(e=>"returned"===e.status).reduce((e,t)=>e+parseFloat(t.total_payment||"0"),0),q=e=>{let t=g(e);return t.toLowerCase().includes("rental")?"".concat(t," Motor"):"".concat(t," Rental Motor")};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"History Penyewa Kendaraan"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Lihat riwayat sewa lengkap dan analitik"})]}),(0,t.jsx)("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:(0,t.jsxs)("button",{onClick:K,disabled:C,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors disabled:opacity-50",children:[(0,t.jsx)(s.Calendar,{className:"h-4 w-4 mr-2"}),C?"Memperbarui...":"Perbarui"]})})]}),L&&(0,t.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,t.jsxs)("div",{className:"flex",children:[(0,t.jsx)(o.AlertCircle,{className:"h-5 w-5 text-red-400"}),(0,t.jsx)("div",{className:"ml-3",children:(0,t.jsx)("p",{className:"text-sm text-red-800",children:L})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-blue-100 text-blue-600",children:(0,t.jsx)(r.Clock,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Rekaman"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:R.length})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-green-100 text-green-600",children:(0,t.jsx)(i.Bike,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Selesai"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:R.filter(e=>"returned"===e.status).length})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-yellow-100 text-yellow-600",children:(0,t.jsx)(l.User,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Diperpanjang"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:R.filter(e=>"extend"===e.status).length})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-purple-100 text-purple-600",children:(0,t.jsx)(s.Calendar,{className:"h-6 w-6"})}),(0,t.jsxs)("div",{className:"ml-4",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Pendapatan"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["Rp ",z.toLocaleString("id-ID")]})]})]})})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,t.jsx)(f.SearchField,{value:y,onChange:_,placeholder:"Cari berdasarkan nama customer, motor, atau plat nomor..."}),(0,t.jsx)(k.SelectDropdown,{value:S,onChange:A,options:[{value:"all",label:"Semua Status"},{value:"returned",label:"Selesai"},{value:"extend",label:"Diperpanjang"},{value:"extendNotPayment",label:"Diperpanjang (Belum Bayar)"},{value:"maintenance",label:"Maintenance"}],icon:(0,t.jsx)(n.Filter,{className:"h-5 w-5"})}),e()&&(0,t.jsx)(w.default,{value:B,onChange:E,showAllOption:!0,placeholder:"Pilih cabang..."})]})}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,t.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Analitik"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 text-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Durasi Sewa Rata-rata"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[R.length>0?(R.reduce((e,t)=>e+(Number(t.rent_duration)||0),0)/R.length).toFixed(1):"0"," hari"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Nilai Sewa Rata-rata"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["Rp ",R.length>0?Math.round(z/R.length).toLocaleString("id-ID"):"0"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Tipe Motor Paling Populer"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(()=>{let e=R.map(e=>e.bike_type).filter(Boolean);if(0===e.length)return"N/A";let t=Object.entries(e.reduce((e,t)=>(e[t]=(e[t]||0)+1,e),{})).sort((e,t)=>{let[,a]=e,[,r]=t;return r-a})[0];return t?I[t[0]]||u.BIKE_OPTIONS[t[0]]||t[0]:"N/A"})()})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:[(0,t.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,t.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["History Penyewa Kendaraan (",U.length,")"]})}),(0,t.jsx)(b,{data:U,onOfferCustomer:e=>((e,t)=>{var a,r,n,s,l;let i,o=q(e.branchId),c=I[e.bike_type||""]||u.BIKE_OPTIONS[e.bike_type]||e.bike_type_name||e.bike_type||"Merk Kendaraan";switch(t){case"reminder":i="Selamat Siang, Bapak/Ibu *".concat(null!=(r=null==e?void 0:e.renter_name)?r:"Nama Customer","*%0A%0ASaya ingin mengingatkan bahwa penyewaan motor *").concat(c,"* dengan nomor kendaraan *").concat(null!=(n=null==e?void 0:e.licence_plat_number)?n:"DD DICOBA BB","* Anda akan segera berakhir pada pukul *").concat((null==e?void 0:e.start_date_rent)?(0,m.convertToTime)(null==e?void 0:e.start_date_rent):"TBD","*.%0A%0AMohon untuk konfirmasi jika ingin melanjutkan. Jika tidak, kami akan melakukan penjemputan pada 1 jam sebelum waktu penyewaan Bapak/Ibu berakhir.%0A%0ATerima kasih sebelumnya dari ").concat(o,".");break;case"bargain":i="Halo Bapak/Ibu *".concat(null!=(s=null==e?void 0:e.renter_name)?s:"Nama Customer","*! 🙏%0A%0ATerima kasih telah mempercayai ").concat(o," sebelumnya. Kami harap pengalaman rental motor Bapak/Ibu sangat memuaskan.%0A%0A🏍️ Kami ingin menawarkan layanan rental motor kami lagi untuk kebutuhan transportasi Bapak/Ibu selanjutnya. Kami memiliki berbagai pilihan motor dengan kondisi prima dan harga terjangkau.%0A%0A⭐ Keunggulan kami:%0A- Motor terawat dan bersih%0A- Harga kompetitif%0A- Pelayanan ramah dan profesional%0A- Antar jemput tersedia%0A%0AApakah Bapak/Ibu tertarik untuk rental motor lagi? Kami siap memberikan pelayanan terbaik!%0A%0AHubungi kami kapan saja. Terima kasih! 🙏");break;default:i="Selamat Siang, Bapak/Ibu *".concat(null!=(l=null==e?void 0:e.renter_name)?l:"Nama Customer","*%0A%0ATerima kasih telah menggunakan layanan ").concat(o,".")}let d=(null==e||null==(a=e.phone_number)?void 0:a.replace(/\D/g,""))||"";d.startsWith("0")?d="62"+d.substring(1):d.startsWith("62")||(d="62"+d);let h="https://wa.me/".concat(d,"?text=").concat(i);window.open(h,"_blank")})(e,"bargain"),onRequestReview:e=>{var t,a,r;let n=q(e.branchId),s=g(e.branchId),l=p(e.branchId||"andi-rental"),i=(null==l?void 0:l.shortenerLink)||"https://bit.ly/rental-motor-terbaik-makassar",o=I[e.bike_type||""]||u.BIKE_OPTIONS[e.bike_type]||e.bike_type_name||e.bike_type||"Merk Kendaraan",c="Halo Bapak/Ibu *".concat(null!=(a=null==e?void 0:e.renter_name)?a:"Nama Customer","*! 🙏%0A%0ATerima kasih telah menyewa motor *").concat(o,"* dengan nomor *").concat(null!=(r=null==e?void 0:e.licence_plat_number)?r:"DD DICOBA BB","* di ").concat(n,".%0A%0A⭐ Kami sangat berharap Bapak/Ibu berkenan memberikan review bintang 5 di Google Maps. Dukungan dan review positif dari Bapak/Ibu akan sangat membantu kami untuk terus berkontribusi memberikan pelayanan rental motor yang lebih baik lagi untuk semua customer.%0A%0A📍 Link Google Maps: ").concat(i,'%0A%0AAtau bisa langsung cari "').concat(s,'" di Google Maps.%0A%0ATerima kasih atas kepercayaan dan dukungannya! 🙏⭐'),d=(null==e||null==(t=e.phone_number)?void 0:t.replace(/\D/g,""))||"";d.startsWith("0")?d="62"+d.substring(1):d.startsWith("62")||(d="62"+d);let m="https://wa.me/".concat(d,"?text=").concat(c);window.open(m,"_blank")},isLoading:C,bikeTypeMap:I})]}),(0,t.jsx)(v.default,{})]})}}]);