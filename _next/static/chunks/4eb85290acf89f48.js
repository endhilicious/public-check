(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,86536,e=>{"use strict";e.s(["Eye",()=>t],86536);let t=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},82164,e=>{"use strict";e.s(["DiscountService",()=>i]),e.i(36180);var t=e.i(98925),a=e.i(59141);let r="discount_list";class i{static async getDiscounts(){try{let e=await (0,t.getDocs)((0,t.collection)(a.db,r)),i=[];return console.log("📊 Fetching discounts from collection:",r),console.log("📊 Found documents:",e.size),e.forEach(e=>{var t,a,r,n;let o=e.data();console.log("📊 Document data:",e.id,o),i.push({id:e.id,...o,start_date:null==(t=o.start_date)?void 0:t.toDate(),end_date:null==(a=o.end_date)?void 0:a.toDate(),createdAt:null==(r=o.createdAt)?void 0:r.toDate(),updatedAt:null==(n=o.updatedAt)?void 0:n.toDate()})}),console.log("discountsdiscounts1",i),i.sort((e,t)=>e.createdAt&&t.createdAt?t.createdAt.getTime()-e.createdAt.getTime():e.name.localeCompare(t.name)),console.log("discountsdiscounts2",i),console.log("📊 Processed discounts:",i),i}catch(e){throw console.error("Error getting discounts:",e),Error("Failed to fetch discounts")}}static async getActiveDiscount(){try{let e=new Date,i=await (0,t.getDocs)((0,t.collection)(a.db,r));if(i.empty)return null;let n=[];return i.forEach(t=>{var a,r,i,o;let l=t.data(),s=null==(a=l.start_date)?void 0:a.toDate(),c=null==(r=l.end_date)?void 0:r.toDate();l.isActive&&s&&c&&s<=e&&c>=e&&n.push({id:t.id,...l,start_date:s,end_date:c,createdAt:null==(i=l.createdAt)?void 0:i.toDate(),updatedAt:null==(o=l.updatedAt)?void 0:o.toDate()})}),n.length>0?n[0]:null}catch(e){throw console.error("Error getting active discount:",e),Error("Failed to fetch active discount")}}static async getActiveDiscountsForDropdown(){try{let e=new Date,i=await (0,t.getDocs)((0,t.collection)(a.db,r)),n=[];return i.forEach(t=>{var a,r,i,o;let l=t.data(),s=null==(a=l.start_date)?void 0:a.toDate(),c=null==(r=l.end_date)?void 0:r.toDate();l.isActive&&c&&c>=e&&n.push({id:t.id,...l,start_date:s,end_date:c,createdAt:null==(i=l.createdAt)?void 0:i.toDate(),updatedAt:null==(o=l.updatedAt)?void 0:o.toDate()})}),n.sort((e,t)=>e.end_date.getTime()-t.end_date.getTime())}catch(e){throw console.error("Error getting active discounts for dropdown:",e),Error("Failed to fetch active discounts")}}static async getDiscount(e){try{let s=(0,t.doc)(a.db,r,e),c=await (0,t.getDoc)(s);if(c.exists()){var i,n,o,l;let e=c.data();return{id:c.id,...e,start_date:null==(i=e.start_date)?void 0:i.toDate(),end_date:null==(n=e.end_date)?void 0:n.toDate(),createdAt:null==(o=e.createdAt)?void 0:o.toDate(),updatedAt:null==(l=e.updatedAt)?void 0:l.toDate()}}return null}catch(e){throw console.error("Error getting discount:",e),Error("Failed to fetch discount")}}static async createDiscount(e,i){try{console.log("🚀 Creating discount with data:",e);let n={name:e.name,discount_type:e.discount_type,discount_amount:e.discount_amount,start_date:new Date(e.start_date),end_date:new Date(e.end_date),isActive:e.isActive,motor_types:e.motor_types||[],image_url:e.image_url||"",createdAt:(0,t.serverTimestamp)(),createdBy:i||"",updatedAt:(0,t.serverTimestamp)(),updatedBy:i||""};console.log("📊 Creating document with data:",n);let o=await (0,t.addDoc)((0,t.collection)(a.db,r),n);if(console.log("✅ Document created with ID:",o.id),e.isActive){console.log("🔄 Deactivating other active discounts...");let e=(0,t.query)((0,t.collection)(a.db,r),(0,t.where)("isActive","==",!0)),n=await (0,t.getDocs)(e),l=(0,t.writeBatch)(a.db);n.forEach(e=>{if(e.id!==o.id){let n=(0,t.doc)(a.db,r,e.id);l.update(n,{isActive:!1,updatedAt:(0,t.serverTimestamp)(),updatedBy:i||""})}}),n.size>1&&(await l.commit(),console.log("✅ Other active discounts deactivated"))}return o.id}catch(e){throw console.error("❌ Error creating discount:",e),console.error("Error details:",e),Error("Failed to create discount")}}static async updateDiscount(e,i,n){try{let o=(0,t.writeBatch)(a.db);if(i.isActive){let i=(0,t.query)((0,t.collection)(a.db,r),(0,t.where)("isActive","==",!0));(await (0,t.getDocs)(i)).forEach(i=>{if(i.id!==e){let e=(0,t.doc)(a.db,r,i.id);o.update(e,{isActive:!1,updatedAt:(0,t.serverTimestamp)(),updatedBy:n||""})}})}let l=(0,t.doc)(a.db,r,e),s={name:i.name,discount_type:i.discount_type,discount_amount:i.discount_amount,start_date:new Date(i.start_date),end_date:new Date(i.end_date),isActive:i.isActive,motor_types:i.motor_types||[],image_url:i.image_url||"",updatedAt:(0,t.serverTimestamp)(),updatedBy:n||""};o.update(l,s),await o.commit()}catch(e){throw console.error("Error updating discount:",e),Error("Failed to update discount")}}static async deleteDiscount(e){try{let i=(0,t.doc)(a.db,r,e);await (0,t.deleteDoc)(i)}catch(e){throw console.error("Error deleting discount:",e),Error("Failed to delete discount")}}static calculateDiscountAmount(e,t){return"percent"===t.discount_type?Math.round(e*(t.discount_amount/100)):t.discount_amount}static calculateDiscountedPrice(e,t){let a=this.calculateDiscountAmount(e,t);return Math.max(0,e-a)}static isDiscountValid(e){let t=new Date;return e.isActive&&e.start_date<=t&&e.end_date>=t}static doesDiscountApplyToMotorType(e,t){return!e.motor_types||0===e.motor_types.length||e.motor_types.includes(t)}}},43531,e=>{"use strict";e.s(["Check",()=>t],43531);let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},43432,e=>{"use strict";e.s(["Phone",()=>t],43432);let t=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]])},63209,e=>{"use strict";e.s(["AlertCircle",()=>t],63209);let t=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},69638,e=>{"use strict";e.s(["CheckCircle",()=>t],69638);let t=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},43782,e=>{"use strict";e.s(["AlertModal",()=>n]);var t=e.i(43476),a=e.i(37727),r=e.i(69638),i=e.i(63209);function n(e){let{isOpen:n,onClose:o,title:l,message:s,type:c,buttonText:d="Tutup"}=e;if(!n)return null;let u="success"===c,m=u?r.CheckCircle:i.AlertCircle;return(0,t.jsxs)("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",onClick:e=>{e.target===e.currentTarget&&o()},children:[(0,t.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm"}),(0,t.jsxs)("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full mx-4 transform transition-all duration-300 ease-out",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 ".concat(u?"bg-green-100":"bg-red-100"," rounded-full flex items-center justify-center"),children:(0,t.jsx)(m,{className:"h-5 w-5 ".concat(u?"text-green-600":"text-red-600")})}),(0,t.jsx)("div",{children:(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:l})})]}),(0,t.jsx)("button",{onClick:o,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Tutup modal",children:(0,t.jsx)(a.X,{className:"h-5 w-5 text-gray-400"})})]}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)("p",{className:"text-gray-700 mb-4",children:s})})}),(0,t.jsx)("div",{className:"flex justify-end p-6 pt-0 border-t border-gray-200",children:(0,t.jsx)("button",{onClick:o,className:"px-6 py-2 ".concat(u?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"," text-white font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 ").concat(u?"focus:ring-green-500":"focus:ring-red-500"),children:d})})]})]})}},12426,e=>{"use strict";e.s(["DollarSign",()=>t],12426);let t=(0,e.i(75254).default)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},87316,e=>{"use strict";e.s(["Calendar",()=>t],87316);let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},55900,e=>{"use strict";e.s(["ChevronUp",()=>t],55900);let t=(0,e.i(75254).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]])},55436,e=>{"use strict";e.s(["Search",()=>t],55436);let t=(0,e.i(75254).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},12482,e=>{"use strict";e.s(["RENTAL_STATUS",()=>a,"RENTAL_STATUS_COLORS",()=>t,"RentalTypes",()=>r,"calculateEndDate",()=>d,"calculateRemainingRentalDays",()=>u,"convertPhoneNumber",()=>h,"convertToDate",()=>l,"convertToTime",()=>s,"formatCurrency",()=>n,"formatRupiah",()=>i,"generatePickupMessage",()=>b,"generateWhatsAppMessage",()=>y,"getFormattedDuration",()=>m,"getFormattedRentalPrice",()=>g,"parseCurrency",()=>o,"removeSeconds",()=>c,"sortByDropoffTime",()=>p]);let t={available:"bg-green-100 text-green-800",returned:"bg-green-100 text-green-800",being_rented_out:"bg-yellow-100 text-yellow-800",maintenance:"bg-red-100 text-red-800",extend:"bg-blue-100 text-blue-800",extendNotPayment:"bg-gray-100 text-gray-800"},a={available:"Tersedia",returned:"Selesai Direntalkan",being_rented_out:"Sedang Direntalkan",maintenance:"Dalam Perawatan",extend:"Perpanjang",extendNotPayment:"Perpanjang Tapi Belum Bayar"},r={driver_days:"Driver (Ojol)",days:"Harian",weeks:"Mingguan",months:"Bulanan"},i=e=>{let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?"Rp 0":"Rp ".concat(t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,"."))},n=e=>e?e.toString().replace(/\D/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"."):"0",o=e=>e?parseInt(e.replace(/\./g,""),10):0,l=e=>{let t=new Date(e),a=t.getDate(),r=["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"][t.getMonth()],i=t.getFullYear();return"".concat(a," ").concat(r," ").concat(i)},s=e=>{if(!e)return"-";try{return new Date(e).toLocaleTimeString("id-ID",{hour:"2-digit",minute:"2-digit"})}catch(e){return"-"}},c=e=>{let t=e.split(":");return 2===t.length?e:3===t.length?"".concat(t[0],":").concat(t[1]):e};function d(e,t,a){let r=new Date(e);switch(a){case"weeks":r.setDate(r.getDate()+7*t);break;case"months":r.setMonth(r.getMonth()+t);break;default:r.setDate(r.getDate()+t)}return r.toISOString().split("T")[0]}function u(e,t,a){let r=new Date(e);switch(a){case"weeks":r.setDate(r.getDate()+7*t);break;case"months":r.setMonth(r.getMonth()+t);break;default:r.setDate(r.getDate()+t)}let i=new Date;return i.setHours(0,0,0,0),r.setHours(0,0,0,0),Math.ceil((r.getTime()-i.getTime())/864e5)}function m(e,t){let a="string"==typeof e?Number(e):e,r=function(e){switch(e){case"weeks":return"Minggu";case"months":return"Bulan";default:return"Hari"}}(t);return"".concat(a," ").concat(r)}let g=(e,t)=>{let a;switch(e){case"weeks":a=t.weeks;break;case"months":a=t.months;break;case"driver_days":a=Number(t.days)-Number(t.driver_deduction_days);break;case"days":a=t.days;break;default:a=0}return Number(a)},h=e=>e.startsWith("0")?"62"+e.slice(1):e.startsWith("62")?e:null,p=e=>e.sort((e,t)=>{let a=e.dropoff_time?e.dropoff_time:"00:00:00",r=t.dropoff_time?t.dropoff_time:"00:00:00";return a.localeCompare(r)}),y=(e,t)=>{var a,r,i,n,o,l;return"reminder"===t?"Selamat Siang, Bapak/Ibu *".concat(null!=(a=null==e?void 0:e.renter_name)?a:"Nama Customer","*%0A%0ASaya ingin mengingatkan bahwa penyewaan motor *").concat(null!=(r=e.bike_type_name)?r:"Merk Kendaraan","* dengan nomor kendaraan *").concat(null!=(i=null==e?void 0:e.licence_plat_number)?i:"PLAT NOT RECOGNIZED","* Anda akan segera berakhir pada pukul *").concat((null==e?void 0:e.dropoff_time)?c(null==e?void 0:e.dropoff_time):"TBD","*.%0A%0AMohon untuk konfirmasi jika ingin melanjutkan. Jika tidak, kami akan melakukan penjemputan sesuai jam pengantaran.%0A%0ATerima kasih sebelumnya."):"Selamat Siang, Bapak/Ibu *".concat(null!=(n=null==e?void 0:e.renter_name)?n:"Nama Customer","*%0A%0ATerima kasih telah menggunakan layanan penyewaan motor kami. Kami harap Anda puas dengan motor *").concat(null!=(o=e.bike_type_name)?o:"Merk Kendaraan","* dengan nomor kendaraan *").concat(null!=(l=null==e?void 0:e.licence_plat_number)?l:"DD DICOBA BB","* yang telah Anda sewa.%0A%0AJika Anda membutuhkan layanan penyewaan motor lagi di masa mendatang, jangan ragu untuk menghubungi kami. Kami siap melayani dengan armada motor yang terawat dan harga yang kompetitif.%0A%0A*Terima kasih atas kepercayaannya, semoga hari Anda menyenangkan.*")},b=(e,t)=>{let a="List Penjemputan Hari ini tanggal ".concat(e,"%0A%0A%0A");return t.forEach(e=>{a+="".concat(e.renter_name,", "),a+="".concat(e.bike_type_name,", "),a+="".concat(Number(e.rent_duration)," Hari, "),a+="Jumlah Helm: *".concat(Number(e.total_helm)||"-","*, "),a+="Jam Pengantaran: *".concat(c(e.dropoff_time||""),"*, "),a+="Lokasi: *".concat(e.renter_address,"*, "),a+="Nomor Telefon: ".concat(e.phone_number,", "),a+="Tim Penjemput: ,%0A%0A",a+="------------------------------ %0A%0A"}),a}},70770,e=>{"use strict";e.s(["MotorService",()=>n]),e.i(36180);var t=e.i(98925),a=e.i(59141);let r=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-orange-500","bg-teal-500","bg-cyan-500","bg-lime-500","bg-amber-500","bg-emerald-500","bg-violet-500","bg-rose-500","bg-sky-500"],i=e=>{let t=0;for(let a=0;a<e.length;a++)t=(t<<5)-t+e.charCodeAt(a),t&=t;return r[Math.abs(t)%r.length]};class n{static async getMotorTypesWithAvailability(){try{console.log("🔍 Fetching motor types from Firebase...");let e=await (0,t.getDocs)((0,t.collection)(a.db,"bike_type_list")),r=[];console.log("📊 Found ".concat(e.size," bike types in collection")),e.forEach(e=>{r.push({id:e.id,...e.data()})});let n=await (0,t.getDocs)((0,t.collection)(a.db,"bike_list")),o=[];console.log("🚲 Found ".concat(n.size," bikes in collection")),n.forEach(e=>{o.push({id:e.id,...e.data()})});let l=new Map;o.forEach(e=>{let t=e.bike_type||"",a=e.status||"";l.has(t)||l.set(t,{total:0,available:0});let r=l.get(t);r.total++,("available"===a.toLowerCase()||"tersedia"===a.toLowerCase())&&r.available++}),console.log("📈 Bike type counts:",Object.fromEntries(l));let s=r.map(e=>{let t=e.id||"",a=l.get(t)||{total:0,available:0},r=(e.bike_merk||"unknown").toLowerCase(),n=i(r);return{id:e.id||"",name:e.bike_type||"Unknown Motor",type:r,pricePerDay:Number(e.days)||0,pricePerWeek:Number(e.weeks)||0,pricePerMonth:Number(e.months)||0,image:e.image_url||null,availableCount:a.available,totalCount:a.total,isAvailable:a.available>0,description:"".concat(e.bike_type||"Unknown Motor"," - ").concat(a.available," tersedia dari ").concat(a.total," total"),color:n}});if(console.log("✅ Generated ".concat(s.length," motor types")),0===s.length)return console.log("⚠️ No data from Firebase, returning sample data"),["honda","yamaha","listrik"].map((e,t)=>({id:"sample-".concat(e,"-").concat(t+1),name:"".concat(e.charAt(0).toUpperCase()+e.slice(1)," Sample"),type:e,pricePerDay:5e4+25e3*t,pricePerWeek:3e5+15e4*t,pricePerMonth:1e6+5e5*t,image:null,availableCount:3-t,totalCount:5-t,isAvailable:!0,description:"".concat(e.charAt(0).toUpperCase()+e.slice(1)," Sample - ").concat(3-t," tersedia dari ").concat(5-t," total"),color:i(e)}));let c=s.filter(e=>e.totalCount>0);return console.log("🔍 Filtered to ".concat(c.length," motor types with bikes")),c}catch(e){throw console.error("❌ Error getting motor types with availability:",e),Error("Failed to fetch motor types with availability")}}static async getMotorTypesGrouped(){try{let e=await this.getMotorTypesWithAvailability(),t={};return e.forEach(e=>{t[e.type]||(t[e.type]=[]),t[e.type].push(e)}),t}catch(e){throw console.error("Error getting grouped motor types:",e),Error("Failed to fetch grouped motor types")}}static async getMotorStats(){try{let e=await this.getMotorTypesWithAvailability(),t={};return e.forEach(e=>{t[e.type]||(t[e.type]=0),t[e.type]+=e.availableCount}),{totalTypes:e.length,totalBikes:e.reduce((e,t)=>e+t.totalCount,0),availableBikes:e.reduce((e,t)=>e+t.availableCount,0),typeCounts:t}}catch(e){throw console.error("Error getting motor stats:",e),Error("Failed to fetch motor statistics")}}static async getMotorTypeFilters(){try{console.log("🔍 Fetching motor type filters from merk_bike collection...");let e=await (0,t.getDocs)((0,t.collection)(a.db,"merk_bike")),r=[{id:"all",name:"all",displayName:"Semua",color:"bg-gray-500"}];if(console.log("📊 Found ".concat(e.size," motor brands in merk_bike collection")),e.forEach(e=>{let t=e.data(),a=e.id,n=t.name||a,o=n.toLowerCase();r.some(e=>e.id===o)||r.push({id:o,name:n,displayName:n.charAt(0).toUpperCase()+n.slice(1),color:i(o)})}),console.log("✅ Generated ".concat(r.length," motor type filters:"),r),1===r.length)return console.log("⚠️ No brands found in merk_bike collection, returning default filters"),[{id:"all",name:"all",displayName:"Semua",color:"bg-gray-500"},{id:"honda",name:"honda",displayName:"Honda",color:i("honda")},{id:"yamaha",name:"yamaha",displayName:"Yamaha",color:i("yamaha")},{id:"listrik",name:"listrik",displayName:"Listrik",color:i("listrik")}];return r}catch(e){return console.error("❌ Error getting motor type filters:",e),[{id:"all",name:"all",displayName:"Semua",color:"bg-gray-500"},{id:"honda",name:"honda",displayName:"Honda",color:i("honda")},{id:"yamaha",name:"yamaha",displayName:"Yamaha",color:i("yamaha")},{id:"listrik",name:"listrik",displayName:"Listrik",color:i("listrik")}]}}static convertToMotorcycle(e){return{id:e.id,name:e.name,isAvailable:e.isAvailable,pricePerDay:e.pricePerDay,pricePerWeek:e.pricePerWeek,pricePerMonth:e.pricePerMonth,status:e.isAvailable?"tersedia":"belum tersedia",type:e.type,image:e.image,description:e.description,color:e.color}}}},73708,e=>{"use strict";e.s(["Image",()=>t],73708);let t=(0,e.i(75254).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},46213,e=>{"use strict";e.s(["default",()=>w],46213);var t=e.i(43476),a=e.i(71645),r=e.i(53145),i=e.i(80202),n=e.i(99683);e.i(65652);var o=e.i(62821),l=e.i(3709),s=e.i(47936),c=e.i(98479),d=e.i(82546),u=e.i(46926),u=u,m=e.i(40921),g=e.i(73708),h=e.i(64659),p=e.i(55900),y=e.i(86536);let b=(0,e.i(75254).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var v=e.i(57688),x=e.i(70770),f=e.i(12482);let k=n.object().shape({name:n.string().required("Nama diskon wajib diisi"),discount_type:n.string().oneOf(["percent","fixed"]).required("Tipe diskon wajib dipilih"),discount_amount:n.number().min(0,"Jumlah diskon tidak boleh negatif").required("Jumlah diskon wajib diisi").test("max-percent","Persentase tidak boleh lebih dari 100%",function(e){let{discount_type:t}=this.parent;return"percent"!==t||!(e>100)}),start_date:n.string().required("Tanggal mulai wajib diisi"),end_date:n.string().required("Tanggal selesai wajib diisi").test("end-after-start","Tanggal selesai harus setelah tanggal mulai",function(e){let{start_date:t}=this.parent;return!t||!e||new Date(e)>new Date(t)}),isActive:n.boolean(),motor_types:n.array().of(n.string()).min(1,"Pilih minimal satu tipe motor"),image_url:n.string().url("Format URL tidak valid").nullable()}),w=e=>{let{onSubmit:n,onCancel:w,initialData:_,isEditing:j=!1,isLoading:D=!1}=e,[N,A]=(0,a.useState)([]),[C,M]=(0,a.useState)(!1),[T,P]=(0,a.useState)((null==_?void 0:_.image_url)||null),[S,E]=(0,a.useState)(null),[B,F]=(0,a.useState)(!0),{control:R,handleSubmit:L,watch:I,formState:{errors:H,isSubmitting:U}}=(0,r.useForm)({resolver:(0,i.yupResolver)(k),mode:"onChange",defaultValues:{name:(null==_?void 0:_.name)||"",discount_type:(null==_?void 0:_.discount_type)||"percent",discount_amount:(null==_?void 0:_.discount_amount)||0,start_date:(null==_?void 0:_.start_date)||"",end_date:(null==_?void 0:_.end_date)||"",isActive:(null==_?void 0:_.isActive)||!1,motor_types:(null==_?void 0:_.motor_types)||[],image_url:(null==_?void 0:_.image_url)||""}}),W=I("discount_type"),q=I("discount_amount"),O=I("motor_types"),J=I("image_url");(0,a.useEffect)(()=>{(async()=>{try{M(!0);let e=await x.MotorService.getMotorTypesWithAvailability();A(e.map(e=>({id:e.id,name:e.name,pricePerDay:e.pricePerDay,pricePerWeek:e.pricePerWeek,pricePerMonth:e.pricePerMonth})))}catch(e){console.error("Error loading bike types:",e)}finally{M(!1)}})()},[]),(0,a.useEffect)(()=>{if(J){E(null);let e=new window.Image;e.onload=()=>P(J),e.onerror=()=>{P(null),E("Gambar tidak dapat dimuat. Periksa URL.")},e.src=J}else P(null),E(null)},[J]);let z=N.map(e=>({value:e.id,label:e.name})),G=[{value:"percent",label:"Persentase (%)"},{value:"fixed",label:"Nominal Tetap (Rp)"}],K=0!==O.length&&q?O.map(e=>{let t=N.find(t=>t.id===e);if(!t)return null;let a=e=>"percent"===W?Math.round(q/100*e):Math.min(q,e),r=t.pricePerDay?a(t.pricePerDay):0,i=t.pricePerWeek?a(t.pricePerWeek):0,n=t.pricePerMonth?a(t.pricePerMonth):0;return{motorType:t.name,daily:{original:t.pricePerDay||0,discount:r,final:(t.pricePerDay||0)-r},weekly:{original:t.pricePerWeek||0,discount:i,final:(t.pricePerWeek||0)-i},monthly:{original:t.pricePerMonth||0,discount:n,final:(t.pricePerMonth||0)-n}}}).filter(Boolean):[];return(0,t.jsxs)("form",{onSubmit:L(e=>{console.log("📋 DiscountForm - Form submitted with data:",e),console.log("📊 Form validation errors:",H),n(e)}),className:"space-y-6",children:[(0,t.jsx)(r.Controller,{name:"name",control:R,render:e=>{var a;let{field:r}=e;return(0,t.jsx)(o.Input,{...r,label:"Nama Diskon",placeholder:"Masukkan nama diskon",error:null==(a=H.name)?void 0:a.message,required:!0})}}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(r.Controller,{name:"discount_type",control:R,render:e=>{var a;let{field:r}=e;return(0,t.jsx)(l.Select,{...r,label:"Bentuk Potongan Harga",options:G,placeholder:"Pilih tipe diskon",error:null==(a=H.discount_type)?void 0:a.message,required:!0})}}),(0,t.jsx)(r.Controller,{name:"discount_amount",control:R,render:e=>{var a,r;let{field:i}=e;return"percent"===W?(0,t.jsx)(o.Input,{...i,type:"number",label:"Jumlah Potongan (%)",placeholder:"0",error:null==(a=H.discount_amount)?void 0:a.message,min:"0",max:"100",required:!0}):(0,t.jsx)(d.CurrencyInput,{label:"Jumlah Potongan (Rp)",value:i.value,onChange:e=>i.onChange(e),error:null==(r=H.discount_amount)?void 0:r.message,required:!0})}})]}),(0,t.jsx)(r.Controller,{name:"start_date",control:R,render:e=>{let{field:a}=e;return(0,t.jsx)(r.Controller,{name:"end_date",control:R,render:e=>{var r,i;let{field:n}=e;return(0,t.jsx)(c.DateRangeInput,{label:"Durasi Tanggal",startDate:a.value,endDate:n.value,onStartDateChange:a.onChange,onEndDateChange:n.onChange,error:(null==(r=H.start_date)?void 0:r.message)||(null==(i=H.end_date)?void 0:i.message),required:!0})}})}}),(0,t.jsx)(r.Controller,{name:"motor_types",control:R,render:e=>{var a;let{field:r}=e;return(0,t.jsx)(u.default,{label:"Tipe Motor",options:z,value:r.value,onChange:r.onChange,placeholder:C?"Memuat tipe motor...":"Pilih tipe motor",error:null==(a=H.motor_types)?void 0:a.message,disabled:C,required:!0,showSelectAll:!0,leftIcon:(0,t.jsx)(m.Bike,{className:"h-4 w-4 text-blue-600"}),helperText:"Pilih tipe motor yang akan mendapat diskon"})}}),(0,t.jsx)(r.Controller,{name:"image_url",control:R,render:e=>{var a;let{field:r}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)(o.Input,{...r,label:"URL Gambar Diskon",placeholder:"https://example.com/discount-banner.jpg",error:(null==(a=H.image_url)?void 0:a.message)||S||void 0,leftIcon:(0,t.jsx)(g.Image,{className:"h-4 w-4"}),helperText:"URL gambar untuk banner diskon (opsional)"}),T&&(0,t.jsxs)("div",{className:"mt-3",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Preview Gambar"}),(0,t.jsx)("div",{className:"relative w-full max-w-md h-32",children:(0,t.jsx)(v.default,{src:T,alt:"Preview diskon",fill:!0,className:"object-cover rounded-lg border border-gray-300",onError:()=>{P(null),E("Gambar tidak dapat dimuat.")}})})]})]})}}),K.length>0&&(0,t.jsxs)("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-50 rounded-lg border border-amber-200 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 cursor-pointer hover:bg-amber-100 transition-colors duration-200",onClick:()=>F(!B),children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-8 h-8 bg-gradient-to-r from-amber-500 to-yellow-500 rounded-lg",children:B?(0,t.jsx)(y.Eye,{className:"w-4 h-4 text-white"}):(0,t.jsx)(b,{className:"w-4 h-4 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-amber-900",children:"Preview Harga Setelah Diskon"}),(0,t.jsx)("p",{className:"text-sm text-amber-700",children:B?"Klik untuk menyembunyikan detail harga":"Klik untuk melihat detail harga"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:"text-sm text-amber-700 font-medium",children:[K.length," Motor"]}),B?(0,t.jsx)(p.ChevronUp,{className:"w-5 h-5 text-amber-600 transition-transform duration-200"}):(0,t.jsx)(h.ChevronDown,{className:"w-5 h-5 text-amber-600 transition-transform duration-200"})]})]}),(0,t.jsx)("div",{className:"transition-all duration-300 ease-in-out ".concat(B?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"," overflow-hidden"),children:(0,t.jsx)("div",{className:"px-4 pb-4",children:(0,t.jsx)("div",{className:"space-y-4",children:K.map((e,a)=>(0,t.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-amber-200 shadow-sm hover:shadow-md transition-shadow duration-200",children:[(0,t.jsxs)("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[(0,t.jsx)(m.Bike,{className:"w-4 h-4 text-amber-600"}),e.motorType]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.daily.original>0&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-3 border border-green-200",children:[(0,t.jsxs)("div",{className:"text-green-800 font-medium mb-2 flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),"Harian"]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-gray-500 line-through text-xs",children:(0,f.formatRupiah)(e.daily.original)}),(0,t.jsx)("div",{className:"text-green-700 font-bold text-lg",children:(0,f.formatRupiah)(e.daily.final)}),(0,t.jsxs)("div",{className:"text-xs text-amber-700 bg-amber-100 px-2 py-1 rounded-full inline-block",children:["Hemat ",(0,f.formatRupiah)(e.daily.discount)]})]})]}),e.weekly.original>0&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-sky-50 rounded-lg p-3 border border-blue-200",children:[(0,t.jsxs)("div",{className:"text-blue-800 font-medium mb-2 flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Mingguan"]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-gray-500 line-through text-xs",children:(0,f.formatRupiah)(e.weekly.original)}),(0,t.jsx)("div",{className:"text-blue-700 font-bold text-lg",children:(0,f.formatRupiah)(e.weekly.final)}),(0,t.jsxs)("div",{className:"text-xs text-amber-700 bg-amber-100 px-2 py-1 rounded-full inline-block",children:["Hemat ",(0,f.formatRupiah)(e.weekly.discount)]})]})]}),e.monthly.original>0&&(0,t.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-indigo-50 rounded-lg p-3 border border-purple-200",children:[(0,t.jsxs)("div",{className:"text-purple-800 font-medium mb-2 flex items-center gap-1",children:[(0,t.jsx)("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Bulanan"]}),(0,t.jsxs)("div",{className:"space-y-1",children:[(0,t.jsx)("div",{className:"text-gray-500 line-through text-xs",children:(0,f.formatRupiah)(e.monthly.original)}),(0,t.jsx)("div",{className:"text-purple-700 font-bold text-lg",children:(0,f.formatRupiah)(e.monthly.final)}),(0,t.jsxs)("div",{className:"text-xs text-amber-700 bg-amber-100 px-2 py-1 rounded-full inline-block",children:["Hemat ",(0,f.formatRupiah)(e.monthly.discount)]})]})]})]})]},a))})})})]}),(0,t.jsx)(r.Controller,{name:"isActive",control:R,render:e=>{var a;let{field:r}=e;return(0,t.jsx)(s.Switch,{label:"Aktifkan Diskon",helperText:"Hanya satu diskon yang dapat aktif pada satu waktu. Mengaktifkan diskon ini akan menonaktifkan diskon lainnya.",checked:r.value,onChange:e=>{console.log("Switch onChange triggered:",e.target.checked),r.onChange(e.target.checked)},error:null==(a=H.isActive)?void 0:a.message})}}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-200",children:[(0,t.jsx)("button",{type:"button",onClick:w,className:"flex-1 px-4 py-2.5 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",disabled:U||D,children:"Batal"}),(0,t.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-blue-600 text-white hover:bg-blue-700 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:U||D,children:U||D?"Menyimpan...":j?"Update Diskon":"Simpan Diskon"})]})]})}},85024,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(43476),a=e.i(71645),r=e.i(18566),i=e.i(71689),n=e.i(82164),o=e.i(43782),l=e.i(86993),s=e.i(46213),c=e.i(52962);function d(){let e=(0,r.useRouter)(),{user:d}=(0,c.useAuth)(),[u,m]=(0,a.useState)(!1),[g,h]=(0,a.useState)(!1),[p,y]=(0,a.useState)({title:"",message:"",type:"success"}),b=(e,t,a)=>{y({title:e,message:t,type:a}),h(!0)},v=async t=>{try{m(!0),console.log("🎯 CreateDiscountScreen - Submitting form data:",t),console.log("👤 User UID:",null==d?void 0:d.uid),await n.DiscountService.createDiscount(t,null==d?void 0:d.uid),b("Berhasil","Diskon berhasil dibuat","success"),setTimeout(()=>{e.push("/discount-management")},1500)}catch(t){console.error("❌ CreateDiscountScreen - Error creating discount:",t),console.error("Error details:",t);let e="Gagal membuat diskon. Silakan coba lagi.";t instanceof Error&&(e="Gagal membuat diskon: ".concat(t.message)),b("Error",e,"error")}finally{m(!1)}},x=()=>{e.push("/discount-management")};return(0,t.jsxs)("div",{className:"space-y-6",children:[u&&(0,t.jsx)(l.default,{message:"Menyimpan Diskon...",size:"lg",fullscreen:!0,showProgress:!1}),(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("button",{onClick:x,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,t.jsx)(i.ArrowLeft,{className:"h-5 w-5 text-gray-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Tambah Diskon Baru"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Buat diskon baru untuk motor rental"})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,t.jsx)(s.default,{onSubmit:v,onCancel:x,isLoading:u})}),(0,t.jsx)(o.AlertModal,{isOpen:g,onClose:()=>h(!1),title:p.title,message:p.message,type:p.type})]})}}]);